<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title size="large">NUEVA ORDEN DE TRABAJO</ion-title>
    <ion-buttons slot="start">
      <ion-menu-button color="primary" menuId="sideMenu">
      </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="formNuevaOT" (ngSubmit)="onSubmit(limpiar)">
    <!-- await for target -->
    <ion-item>
      <ion-label>Tarjeta </ion-label>
      <ion-input formControlName="tarjeta"  readonly> </ion-input>  
    </ion-item>

    <ion-button id="addNumeroTarjeta" (click)="addNumeroTarjeta()">Buscar Tarjeta</ion-button>
    <ion-button id="cancelAddNumeroTarjeta" 
    (click)="cancelAddNumeroTarjeta()" disabled color="danger" >Cancelar</ion-button>
    <ion-button id="limpiarTarjeta" (click)="limpiarTarjeta()" 
    color="light">Limpiar</ion-button>


    <ion-item>
      <ion-label>N° Orden Papel</ion-label>
      <ion-input formControlName="ordenPapel"></ion-input>  
    </ion-item>

    <ion-item>
      <!-- <ion-label position="floating">Trabajo</ion-label>
      <ion-input formControlName="trabajo"></ion-input> -->
      <ion-select placeholder="Trabajo (*)" multiple="false" formControlName="TrabajoId">
        <ion-content *ngFor="let trabajo of trabajos">
        <ion-select-option value="{{trabajo.id}}">{{trabajo.nombre}}</ion-select-option>
        </ion-content>
      </ion-select>
      

    </ion-item>

    <!-- CLIENTES -->
    <ion-item>
      <ion-button (click)="openModalClientes()"> Agregar Cliente (*)</ion-button>
    </ion-item>


    <ion-list>
      <ion-item>
        <ion-label>Nombre</ion-label>
        <ion-label>Apellido</ion-label>
        <ion-label>Celular</ion-label>
        <ion-label>DNI</ion-label>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-item>
        <ion-label>{{cliente.nombre}}</ion-label>
        <ion-label>{{cliente.apellido}}</ion-label>
        <ion-label>{{cliente.celular}}</ion-label>
        <ion-label>{{cliente.dni}}</ion-label>
      </ion-item>

    </ion-list>

    <!-- MOTOS -->
    <ion-item>
      <ion-button (click)="openModalMotos()"> Agregar Moto </ion-button>
    </ion-item>

    <ion-list>
      <ion-item>
        <ion-label>Marca</ion-label>
        <ion-label>Modelo</ion-label>
        <ion-label>Cilindrada</ion-label>
        <ion-label>Año</ion-label>
        <ion-label>Observaciones</ion-label>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-item>
        <ion-label>{{moto.marca}}</ion-label>
        <ion-label>{{moto.modelo}}</ion-label>
        <ion-label>{{moto.cilidrada}}</ion-label>
        <ion-label>{{moto.anio}}</ion-label>
        <ion-label class="ion-text-wrap">{{moto.observaciones}}</ion-label>
      </ion-item>

    </ion-list>

    <!-- REPUESTOS -->

    <!-- <ion-item>
      <ion-label position="floating">Repuestos</ion-label>
      <ion-input formControlName="repuestos"></ion-input>
    </ion-item> -->

    <ion-item>
      <ion-label position="floating">Detalle</ion-label>
      <ion-textarea formControlName="detalle"></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Precio $</ion-label>
      <ion-input formControlName="precio" type="number"
      (ionChange)="calcSaldo()"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="floating">Entrega $</ion-label>
      <ion-input formControlName="entrega" type="number"
      (ionChange)="calcSaldo()"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Saldo $</ion-label>
      <ion-input readonly type="number" formControlName="saldo" > </ion-input>

    </ion-item>

    <ion-item>
    <ion-datetime-button
    datetime="id_fecha_entrega_estimada" 
    ></ion-datetime-button>
    <ion-modal [keepContentsMounted]="true">
      <ng-template>
        <ion-datetime id="id_fecha_entrega_estimada" formControlName="fecha_entrega_estimada"></ion-datetime>
      </ng-template>
    </ion-modal>
  </ion-item>

  

  <ion-item>
    <ion-button [disabled]="!formNuevaOT.valid" color="primary" (click)="onSubmit(limpiar)">Guardar y Limpiar</ion-button>
  </ion-item>

  <ion-item>
    <ion-button [disabled]="!formNuevaOT.valid" color="primary" (click)="onSubmit(nolimpiar)">Guardar y Seguir Añadiendo</ion-button>
  </ion-item>

  </form>
</ion-content>
