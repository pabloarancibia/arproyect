<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title size="large">ORDENES DE TRABAJO</ion-title>
    <ion-buttons slot="start">
      <ion-menu-button color="primary" menuId="sideMenu">
      </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- NGX DATATABLE -->
  <!-- <input type="text" (keyup)='filterDatatable($event)'> -->
  <input
        type="text"
        id="filterByCliente"
        style="padding:8px;margin:15px auto;width:30%;"
        placeholder="Filtrar por Cliente..."
        (keyup)="updateFilter($event)"
      />

  <ion-button (click)="setDateFrom(30)"
    color="light"
    size="small">
    <ion-icon name="calendar-outline"></ion-icon>
    <ion-label> - 30 </ion-label>
  </ion-button>

  <ion-button (click)="setDateFrom(60)"
  color="light"
  size="small">
    <!-- <ion-icon name="calendar-outline"></ion-icon> -->
    <ion-label> - 60 </ion-label>
  </ion-button>
  <ion-button (click)="setDateFrom(90)"
  color="light"
  size="small">
    <!-- <ion-icon name="calendar-outline"></ion-icon> -->
    <ion-label> - 90 </ion-label>
  </ion-button>
  <ion-button (click)="setDateFrom(120)"
  color="light"
  size="small">
    <!-- <ion-icon name="calendar-outline"></ion-icon> -->
    <ion-label> - 120 </ion-label>
  </ion-button>
  <ion-button (click)="setDateFrom(3650)"
  color="light"
  size="small">
    <!-- <ion-icon name="calendar-outline"></ion-icon> -->
    <ion-label> - ... </ion-label>
  </ion-button>

  <div class="ion-padding">
    <!-- Theme classes dark, material, bootstrap -->
    <ngx-datatable 
      #table
      class="ngx-datatable bootstrap"
      [limit]="15"  
      [rows]="rows" 
      [rowHeight]="50" 
      [columns]="columns"
      [columnMode]="'force'" 
      [sortType]="SortType.multi" 
      [headerHeight]="50" 
      [footerHeight]="50"
      [summaryRow]="true"
      [summaryPosition]="'bottom'"
      [loadingIndicator]="loadingIndicator"
      [reorderable]="reorderable"
      [selected]="selected"
      [rowClass]="getRowClass"
      (activate)="onActivate($event)"

    >

    <ngx-datatable-column name="Mensaje" prop="Cliente.celular">
      <ng-template ngx-datatable-cell-template 
        let-rowIndex="rowIndex" 
        let-value="row"                        
        let-row="row">
        <ion-button type="button" class="button"
            (click)='handleSendSms(row)'> 
            <ion-icon name="logo-whatsapp"></ion-icon>
        </ion-button>
                 </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Estado" prop='Estado.nombre'>
      <ng-template let-column="column" ngx-datatable-header-template>
          <span>Estado</span>
      </ng-template>
      <ng-template let-value="value" ngx-datatable-cell-template>
          {{value | uppercase}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Apellido" prop='Cliente.apellido' >
    </ngx-datatable-column>
    <ngx-datatable-column name="Nombre" prop='Cliente.nombre' >
    </ngx-datatable-column>
    <ngx-datatable-column name="Trabajo" prop='Trabajo.nombre' >
    </ngx-datatable-column>
    <ngx-datatable-column name="Moto" prop='Moto.modelo' >
    </ngx-datatable-column>
    <!-- <ngx-datatable-column name="Entrega" prop='fecha_entrega_estimada'>
    </ngx-datatable-column> -->

        <ngx-datatable-column name="Entrega" prop='fecha_entrega_estimada'>
          <ng-template let-column="column" ngx-datatable-header-template>
              <span>Entrega</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
              {{value | date: 'EE dd/MM'}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Ingreso" prop='createdAt'>
          <ng-template let-column="column" ngx-datatable-header-template>
              <span>Ingreso</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
              {{value | date: 'EE dd/MM'}}
          </ng-template>
        </ngx-datatable-column>

    </ngx-datatable>
  
  </div>
  <!-- END NGX DATATABLE -->

</ion-content>
